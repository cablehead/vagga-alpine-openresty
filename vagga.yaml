containers:
    alpine:
        setup:
        - !Alpine v3.1
        - !BuildDeps [
            make, gcc, musl-dev, pcre-dev, openssl-dev, zlib-dev, ncurses-dev,
            readline-dev, curl, perl]
        - !Depends "musl-crypt-fix.patch"
        - !TarInstall
          url: http://openresty.org/download/ngx_openresty-1.7.7.2.tar.gz
          script: |
            { for i in /work/*.patch; do echo "$i"; patch -p0 < "$i"; done }
            ./configure
            make && make install


commands:
    sh: !Command
        description: Run shell inside the container
        container: alpine
        run: /bin/sh
